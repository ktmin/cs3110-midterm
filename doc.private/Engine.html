<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="State.html">
<link rel="next" href="Authors.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Hogwarts" rel="Chapter" href="Hogwarts.html">
<link title="Command" rel="Chapter" href="Command.html">
<link title="State" rel="Chapter" href="State.html">
<link title="Engine" rel="Chapter" href="Engine.html">
<link title="Authors" rel="Chapter" href="Authors.html">
<link title="Model" rel="Chapter" href="Model.html">
<link title="Controller" rel="Chapter" href="Controller.html">
<link title="View" rel="Chapter" href="View.html"><title>Engine</title>
</head>
<body>
<div class="navbar"><a class="pre" href="State.html" title="State">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Authors.html" title="Authors">Next</a>
</div>
<h1>Module <a href="type_Engine.html">Engine</a></h1>

<pre><span id="MODULEEngine"><span class="keyword">module</span> Engine</span>: <code class="code">sig</code> <a href="Engine.html">..</a> <code class="code">end</code></pre><div class="info module top">
<div class="info-desc">
<p>The main entry point for the game interface.</p>
</div>
</div>
<hr width="100%">

<pre><code><span id="TYPEend_state"><span class="keyword">type</span> <code class="type"></code>end_state</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTend_state.Win"><span class="constructor">Win</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTend_state.Loss"><span class="constructor">Loss</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTend_state.Continue"><span class="constructor">Continue</span></span></code></td>

</tr></table>



<pre><span id="VALprint_state"><span class="keyword">val</span> print_state</span> : <code class="type"><a href="State.html#TYPEt">State.t</a> -> <a href="State.html#TYPEt">State.t</a> -> ANSITerminal.style -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_state caster target house</code> prints all of the status info on the 
    <code class="code">caster</code> in <code class="code">house</code> style.</p>
</div>
</div>

<pre><span id="VALcast_spell"><span class="keyword">val</span> cast_spell</span> : <code class="type"><a href="Hogwarts.html#TYPEspell_info">Hogwarts.spell_info</a> -><br>       <a href="State.html#TYPEt">State.t</a> -> <a href="State.html#TYPEt">State.t</a> -> ANSITerminal.style -> <a href="State.html#TYPEt">State.t</a> * <a href="State.html#TYPEt">State.t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">cast_spell spell caster target house</code> prints the casting <code class="code">spell</code> that
    affects the target and printed info is in <code class="code">house</code> style</p>
</div>
</div>

<pre><span id="VALspell_finder"><span class="keyword">val</span> spell_finder</span> : <code class="type"><a href="Hogwarts.html#TYPEspell_info">Hogwarts.spell_info</a> list -><br>       int -> int -> <a href="Hogwarts.html#TYPEspell_info">Hogwarts.spell_info</a> * <a href="Hogwarts.html#TYPEspell_info">Hogwarts.spell_info</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">spell_finder spells min_threshold max_threshold</code> takes a non-empty <code class="code">spells</code>
    list and returns a tuple of the (minim*maximum) damaging spell in the given 
    thresholds (inclusive).</p>
</div>
</div>

<pre><span id="VALenemy_turn"><span class="keyword">val</span> enemy_turn</span> : <code class="type">?skip_draw:bool -><br>       <a href="Hogwarts.html#TYPEt">Hogwarts.t</a> -> <a href="State.html#TYPEt">State.t</a> -> <a href="State.html#TYPEt">State.t</a> -> ANSITerminal.style -> <a href="State.html#TYPEt">State.t</a> * <a href="State.html#TYPEt">State.t</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">enemy_turn hogwarts enemy player house</code> takes in the arguments with enemy
    as the caster and performs a basic naive action (attacking with as much 
    damage each time as possible). It returns a tuple where the first argument 
    is the new enemy state and the second, the new player state.</p>
</div>
</div>

<pre><span id="VALcheck_conditions"><span class="keyword">val</span> check_conditions</span> : <code class="type"><a href="State.html#TYPEt">State.t</a> -> <a href="State.html#TYPEt">State.t</a> -> <a href="Engine.html#TYPEend_state">end_state</a></code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">check_conditions player enemy</code> checks to see whether <code class="code">player</code> or <code class="code">enemy</code>
    is below 0 health and if so, produces a Loss or Win state respictively if 
    one has less than required health. Otherwise Continue is produced.
    If both are under 0 health then by default the method will currently award 
    the player the victory.</p>
</div>
</div>

<pre><span id="VALlist_cards"><span class="keyword">val</span> list_cards</span> : <code class="type"><a href="Hogwarts.html#TYPEspell_info">Hogwarts.spell_info</a> list -> ANSITerminal.style -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">list_cards spells house</code> prints the names of all <code class="code">spells</code> in the colour
    of <code class="code">house</code></p>
</div>
</div>

<pre><span id="VALrun_command"><span class="keyword">val</span> run_command</span> : <code class="type"><a href="State.html#TYPEt">State.t</a> -><br>       <a href="State.html#TYPEt">State.t</a> -><br>       ANSITerminal.style -><br>       <a href="Hogwarts.html#TYPEt">Hogwarts.t</a> -><br>       <a href="Command.html#TYPEcommand">Command.command</a> -><br>       (?asked_state:bool -><br>        <a href="State.html#TYPEt">State.t</a> -> <a href="State.html#TYPEt">State.t</a> -> ANSITerminal.style -> <a href="Hogwarts.html#TYPEt">Hogwarts.t</a> -> unit) -><br>       unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">run_command player enemy house hogwarts cmd callback</code> runs a valid <code class="code">cmd</code> 
    and mitigates possible errors that are thrown through Hogwarts.UnknownSpell.
    Post command, the callback function is called and takes in <code class="code">player</code> <code class="code">enemy</code>
    <code class="code">house</code> <code class="code">hogwarts</code> in that respective order.</p>
</div>
</div>

<pre><span id="VALaffirmation"><span class="keyword">val</span> affirmation</span> : <code class="type"><a href="Hogwarts.html#TYPEt">Hogwarts.t</a> -> <a href="Hogwarts.html#TYPEcharacter_info">Hogwarts.character_info</a> -> <a href="State.html#TYPEt">State.t</a> -> bool</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">affirmation hogwarts enemy_info enemy</code> takes in the enemy for the info 
    output and returns a boolean if the player chooses to fight that enemy.
    Y or YES will fight, any other input (N or invalid) will return to character
    menu.</p>
</div>
</div>

<pre><span id="VALinverse_colour"><span class="keyword">val</span> inverse_colour</span> : <code class="type">ANSITerminal.style -> ANSITerminal.style list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">inverse_colour colour</code> takes in a colour and returns the inverse (if it was
    in the background. If not one of four house clours 
    (red, green, blue, yellow) then default ANSITerminal style is returned.</p>
</div>
</div>

<pre><span id="VALchoose_opponent"><span class="keyword">val</span> choose_opponent</span> : <code class="type"><a href="State.html#TYPEt">State.t</a> -><br>       <a href="Hogwarts.html#TYPEt">Hogwarts.t</a> -><br>       ANSITerminal.style -><br>       (?asked_state:bool -><br>        <a href="State.html#TYPEt">State.t</a> -> <a href="State.html#TYPEt">State.t</a> -> ANSITerminal.style -> <a href="Hogwarts.html#TYPEt">Hogwarts.t</a> -> unit) -><br>       unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">choose_opponenet player hogwarts house callback</code> gives the option for the 
    player to choose from the range of opponents to face. <code class="code">callback</code> is 
    called when player chooses a character and affirms that they want 
    to battle them.</p>
</div>
</div>

<pre><span id="VALplay"><span class="keyword">val</span> play</span> : <code class="type">?asked_state:bool -><br>       <a href="State.html#TYPEt">State.t</a> -> <a href="State.html#TYPEt">State.t</a> -> ANSITerminal.style -> <a href="Hogwarts.html#TYPEt">Hogwarts.t</a> -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">play player enemy house name</code> is the main game loop that takes in <code class="code">player</code>
    and <code class="code">enemy</code> states, <code class="code">house</code> text color and <code class="code">name</code> hogwarts game state and 
    progresses based on player inputs until a win/loss condition is fulfilled.
    The <code class="code">asked_state</code> is an optional argument that if set to false will by 
    default print out the statuses of <code class="code">player</code> and <code class="code">enemy</code></p>
</div>
</div>

<pre><span id="VALchoose_house"><span class="keyword">val</span> choose_house</span> : <code class="type">string -> ANSITerminal.style option</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">choose_house h</code> returns the colour representing the respective Harry Potter
    house as specified by <code class="code">h</code>. If the house name is invalid 
    (name does not exist), None will be returned.</p>
</div>
</div>

<pre><span id="VALplay_init"><span class="keyword">val</span> play_init</span> : <code class="type">string -> string -> string -> string -> ANSITerminal.style -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">play_init f1 f2 house</code> takes in a spells json <code class="code">f1</code> and characters <code class="code">f2</code>, 
    and a ANSITerminal.style <code class="code">house</code> color, then starts the game.</p>
</div>
</div>

<pre><span id="VALname"><span class="keyword">val</span> name</span> : <code class="type">string -> ANSITerminal.style -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">name house</code> takes in the ANSITerminal colour <code class="code">house</code> and records the 
    player's name to be used in gameplay. 
    The name specified should be regular ASCII alphabet with no numbers 
    or special characters. Method will repeat until a valid input is received.</p>
</div>
</div>

<pre><span id="VALintro_text"><span class="keyword">val</span> intro_text</span> : <code class="type">string list list</code></pre>
<pre><span id="VALget_color_code"><span class="keyword">val</span> get_color_code</span> : <code class="type">int -> ANSITerminal.style</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">get_color_code num</code> gets the respective color of house in accordance with
    <code class="code">num</code>. 0 or 1 is red, 2,3 yellow, 4,5 green, 6,7 blue. Any other number
    will return white.</p>
</div>
</div>

<pre><span id="VALref_num"><span class="keyword">val</span> ref_num</span> : <code class="type">int Pervasives.ref</code></pre>
<pre><span id="VALprint_arr"><span class="keyword">val</span> print_arr</span> : <code class="type">string list -> string list</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_arr arr</code> prints he first element of a non-empty list and returns
    all non-printed elements (can be an empty list).</p>
</div>
</div>

<pre><span id="VALprint_arr_2d"><span class="keyword">val</span> print_arr_2d</span> : <code class="type">string list list -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_arr_2d arr</code> prints all elements from a list of string lists.
    The printing pattern is it prints the head element of each respective list
    and iterates forward until all lists are empty.</p>
</div>
</div>

<pre><span id="VALhouse"><span class="keyword">val</span> house</span> : <code class="type">unit -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">house</code> begins the game by asking the player for their chose Harry Potter
    house. It will progress to name and gameplay if a valid name is provided
    (case-insensitive) or repeat until a valid one is inputted.</p>
</div>
</div>
</body></html>